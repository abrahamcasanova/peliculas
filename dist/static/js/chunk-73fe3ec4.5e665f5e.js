(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73fe3ec4"],{"1fcf":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return i}));var n=a("b775");function o(){return Object(n["a"])({url:"api/quotes",method:"get"})}function r(e){return Object(n["a"])({url:"api/quotes",method:"post",data:e})}function u(e){return Object(n["a"])({url:"api/quotes/"+e.id,method:"put",data:e})}function i(e){return Object(n["a"])({url:"api/quotes/"+e,method:"delete"})}},"299b":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{value:e.dialogChangeStatus,persistent:"","max-width":"65%"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Cambiar Estatus")])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",attrs:{value:e.valid,"lazy-validation":""}},[a("v-row",[a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-autocomplete",{attrs:{value:e.quote.bitacora.user_id,required:"",items:e.users,chips:"","item-text":"name","item-value":"id","small-chips":"",clearable:"",label:"Usuario"},on:{input:function(t){return e.setValue("user_id",t)}}})],1),a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-combobox",{attrs:{value:e.quote.bitacora.status,color:"blue",clearable:"","persistent-hint":"","small-chips":"",required:"",items:e.status,"item-text":"name","item-value":"name","return-object":!1,label:"Estatus"},on:{input:function(t){return e.setValue("status",t)}}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-menu",{ref:"date_contact",attrs:{value:e.date_contact,"close-on-content-click":!1,"return-value":e.quote.bitacora.date_contact,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.quote.bitacora,"date_contact",t)},"update:return-value":function(t){return e.$set(e.quote.bitacora,"date_contact",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{value:e.quote.bitacora.date_contact,label:"Fecha de contacto",required:"","prepend-icon":"mdi-calendar"},on:{input:function(t){return e.setValue("date_contact",t)}}},"v-text-field",o,!1),n))]}}])},[a("v-date-picker",{attrs:{value:e.quote.bitacora.date_contact,locale:"es-mx",required:"",rules:e.requiredRule},on:{change:function(t){return e.$refs.date_contact.save(e.quote.bitacora.date_contact)},input:function(t){return e.setValue("date_contact",t)}}})],1)],1),a("v-col",{attrs:{cols:"12",md:"12"}},[a("v-textarea",{attrs:{value:e.quote.bitacora.comments,filled:"","auto-grow":"",label:"Comentarios",rows:"3","row-height":"30",shaped:""},on:{input:function(t){return e.setValue("comments",t)}}})],1)],1)],1)],1),a("small",{staticClass:"red--text"},[e._v("*Campos obligatorios")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"grey darken-1",text:""},on:{click:e.closeDialog}},[e._v(" Cerrar ")]),a("v-btn",{attrs:{text:""},on:{click:e.update}},[e._v(" Actualizar ")])],1)],1)],1)],1)},o=[],r=a("1da1"),u=(a("96cf"),a("c24f")),i={name:"DialogStatusQuote",filters:{statusFilter:function(e){var t={published:"success",draft:"info",deleted:"danger"};return t[e]}},props:{quote:{type:Object,default:null},isNewQuote:{type:Boolean},dialog:{type:Boolean,default:!1},dialogChangeStatus:{type:Boolean}},data:function(){return{valid:!1,users:{},quoteClone:this.quote,status:["Contacto","Cotización","Reservado","Cancelado"],date_contact:!1,requiredRule:[function(e){return!!e||"Este campo es requerido"}]}},computed:{},created:function(){this.getUsers()},methods:{setValue:function(e,t){this.quoteClone.id=this.quote.id,this.quoteClone.bitacora[e]=t,this.$emit("update:quote",this.quoteClone)},update:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.form.validate()&&(e.$emit("update:quote",e.quoteClone),e.$emit("update",e.quote));case 1:case"end":return t.stop()}}),t)})))()},changeStatus:function(){this.$emit("update:dialogChangeStatus",!1)},closeDialog:function(){this.$emit("close",!1)},getUsers:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["c"])();case 2:e.users=t.sent;case 3:case"end":return t.stop()}}),t)})))()}}},s=i,c=a("2877"),l=Object(c["a"])(s,n,o,!1,null,null,null);t["a"]=l.exports},4384:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{value:e.dialog,persistent:"",scrollable:"","max-width":"60%"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Editar")])]),a("v-divider"),a("v-card-text",[a("v-container",[a("v-form",{ref:"form2",attrs:{value:e.valid2,"lazy-validation":""}},[a("v-row",[a("v-col",{attrs:{cols:"12",md:"12"}},[a("v-autocomplete",{attrs:{value:e.quote.customer_id,required:"",items:e.customers,chips:"","item-text":"full_name","item-value":"id","small-chips":"",clearable:"",label:"Cliente"},on:{input:function(t){return e.setValue("customer_id",t)}}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{value:e.quote.girlfriend_name,label:"Nombre de novia",rules:e.nameRules,required:""},on:{input:function(t){return e.setValue("girlfriend_name",t)}}})],1),a("v-col",{attrs:{cols:"6"}},[a("v-text-field",{attrs:{value:e.quote.boyfriend_name,label:"Nombre de novio",rules:e.nameRules,required:""},on:{input:function(t){return e.setValue("boyfriend_name",t)}}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{value:e.quote.place_or_residence,label:"Lugar de residencia",required:""},on:{input:function(t){e.quoteClone.place_or_residence=t}}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-menu",{ref:"wedding_date",attrs:{"close-on-content-click":!1,"return-value":e.quote.wedding_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.quote,"wedding_date",t)},"update:return-value":function(t){return e.$set(e.quote,"wedding_date",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{value:e.quote.wedding_date,label:"Fecha de la boda*",required:"",rules:e.requiredRule,"prepend-icon":"mdi-calendar"},on:{input:function(t){return e.setValue("wedding_date",t)}}},"v-text-field",o,!1),n))]}}]),model:{value:e.wedding_date,callback:function(t){e.wedding_date=t},expression:"wedding_date"}},[a("v-date-picker",{attrs:{value:e.quote.wedding_date,locale:"es-mx",required:"",rules:e.requiredRule},on:{change:function(t){return e.$refs.wedding_date.save(e.quote.wedding_date)},input:function(t){return e.setValue("wedding_date",t)}}})],1)],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{value:e.quote.type_of_ceremony,label:"Tipo de ceremonia",required:""},on:{input:function(t){e.quoteClone.type_of_ceremony=t}}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{value:e.quote.number_of_guests,type:"number",label:"Número de invitados"},on:{input:function(t){e.quoteClone.number_of_guests=t}}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{value:e.quote.wedding_budget,type:"number",step:"0.01",label:"Presupuesto del paquete de la boda",required:""},on:{input:function(t){e.quoteClone.wedding_budget=t}}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{value:e.quote.number_of_nights,type:"number",label:"Número de noches",required:""},on:{input:function(t){e.quoteClone.number_of_nights=t}}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{value:e.quote.wedding_budget_by_person,type:"number",step:"0.01",label:"Tarifa P/P",required:""},on:{input:function(t){e.quoteClone.wedding_budget_by_person=t}}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-dialog",{ref:"dialog",attrs:{"return-value":e.quote.schedule,persistent:"",width:"290px"},on:{"update:returnValue":function(t){return e.$set(e.quote,"schedule",t)},"update:return-value":function(t){return e.$set(e.quote,"schedule",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,o=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{value:e.quote.schedule,label:"Horario disponible","prepend-icon":"mdi-clock-time-four-outline",readonly:""},on:{input:function(t){return e.setValue("schedule",t)}}},"v-text-field",o,!1),n))]}}]),model:{value:e.modalSchedule,callback:function(t){e.modalSchedule=t},expression:"modalSchedule"}},[e.modalSchedule?a("v-time-picker",{attrs:{value:e.quote.schedule,"full-width":""},on:{input:function(t){return e.setValue("schedule",t)}}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.modalSchedule=!1}}},[e._v(" Cancelar ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.dialog.save(e.quote.schedule)}}},[e._v(" OK ")])],1):e._e()],1)],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{value:e.quote.destination,label:"Destino",required:""},on:{input:function(t){e.quoteClone.destination=t}}})],1),a("v-col",{attrs:{cols:"4"}},[a("v-text-field",{attrs:{value:e.quote.honeymoon,label:"Luna de miel",required:""},on:{input:function(t){e.quoteClone.honeymoon=t}}})],1),a("v-col",{attrs:{cols:"12",md:"12"}},[a("v-textarea",{attrs:{value:e.quote.comments,filled:"","auto-grow":"",label:"Comentarios/Inspiraciones",rows:"3","row-height":"30",shaped:""},on:{input:function(t){e.quoteClone.comments=t}}})],1)],1)],1)],1),a("small",{staticClass:"red--text"},[e._v("*Campos obligatorios")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"grey darken-1",text:""},on:{click:e.closeDialog}},[e._v(" Cerrar ")]),!0===e.isNewQuote?a("v-btn",{attrs:{dark:"",color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" Guardar ")]):a("v-btn",{attrs:{text:""},on:{click:e.update}},[e._v(" Actualizar ")])],1)],1)],1)],1)},o=[],r=a("1da1"),u=(a("96cf"),a("f6b0")),i={name:"DialogQuote",props:{quote:{type:Object,default:null},isNewQuote:{type:Boolean},dialog:{type:Boolean,default:!1}},data:function(){return{modalSchedule:!1,quoteClone:this.quote,customers:{},valid2:!1,nameRules:[function(e){return!!e||"Nombre es requerido"}],requiredRule:[function(e){return!!e||"Este campo es requerido"}],wedding_date:!1}},computed:{},created:function(){this.getCustomers()},methods:{getVal:function(e){this.$emit("quote.girlfriend_name",e),console.log(e)},setValue:function(e,t){this.quoteClone[e]=t,this.$emit("update:quote",this.quoteClone)},update:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.form2.validate()&&(e.$emit("update:quote",e.quoteClone),e.$emit("update",e.quote));case 1:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.form2.validate()&&(e.$emit("update:quote",e.quoteClone),e.$emit("save",e.quote));case 1:case"end":return t.stop()}}),t)})))()},getCustomers:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["b"])();case 2:e.customers=t.sent,e.ready=!0;case 4:case"end":return t.stop()}}),t)})))()},closeDialog:function(){this.$emit("close",!1)}}},s=i,c=a("2877"),l=Object(c["a"])(s,n,o,!1,null,null,null);t["a"]=l.exports},"53c5":function(e,t,a){},"8ccd":function(e,t,a){"use strict";a("53c5")},9406:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a(e.currentRole,{tag:"component"})],1)},o=[],r=a("5530"),u=a("2f62"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-editor-container"},[a("el-row",[a("el-col",{staticClass:"md-12",staticStyle:{"padding-right":"8px","margin-bottom":"30px"}},[a("log-timer")],1)],1)],1)},s=[],c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",{staticClass:"ma-10"},[a("v-card",[a("v-card-title",[e._v(" Seguimiento "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.quotes,search:e.search,"items-per-page":5,loading:e.listLoading,"footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAll:"Todos",itemsPerPageOptions:[10,20]},"loading-text":"Cargando....... Espere un momento"},scopedSlots:e._u([{key:"item.status",fn:function(t){var n=t.item;return[a("v-chip",{attrs:{color:e.getColor(n.status),dark:""}},[e._v(" "+e._s(n.status)+" ")])]}},{key:"item.statusDay",fn:function(t){var n=t.item;return[n.statusDay?a("v-chip",{attrs:{color:n.color,dark:""}},[e._v(" "+e._s(n.statusDay)+" ")]):e._e()]}},{key:"item.dateTransc",fn:function(t){var n=t.item;return[a("label",[e._v(" "+e._s(n.dateTransc)+" ")])]}},{key:"item.actions",fn:function(t){var n=t.item;return[a("div",{staticClass:"d-inline-flex",attrs:{align:"stretch",justify:"space-around"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mx-2",attrs:{fab:"",dark:"","x-small":"",color:"primary"},on:{click:function(t){return e.showModalStatus(n.id)}}},"v-btn",r,!1),o),[a("v-icon",{attrs:{dark:""}},[e._v(" mdi-dots-horizontal-circle-outline ")])],1)]}}],null,!0)},[a("span",[e._v("Cambiar estatus")])]),a("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,r=t.attrs;return[e.checkSpecificPermission("edit-user")?a("v-btn",e._g(e._b({staticClass:"mx-2",attrs:{fab:"",dark:"","x-small":"",color:"green"},on:{click:function(t){return e.editQuote(n)}}},"v-btn",r,!1),o),[a("v-icon",{attrs:{dark:""}},[e._v(" mdi-pencil ")])],1):e._e()]}}],null,!0)},[a("span",[e._v("Editar cotización")])])],1)]}}],null,!0)})],1),a("v-row",{attrs:{justify:"center"}},[a("dialogQuoteVue",{ref:"dialogEdit",attrs:{dialog:e.dialog,quote:e.quote,"is-new-quote":e.isNewQuote},on:{"update:quote":function(t){e.quote=t},close:e.closeDialog,update:e.updateQuote}})],1),a("v-row",{attrs:{justify:"center"}},[a("dialogQuoteStatusVue",{ref:"dialogEdit",attrs:{"dialog-change-status":e.dialogChangeStatus,quote:e.quote,"is-new-quote":e.isNewQuote},on:{"update:quote":function(t){e.quote=t},close:e.closeDialog,update:e.updateQuote}})],1)],1)},l=[],d=a("1da1"),f=(a("96cf"),a("159b"),a("b64b"),a("4384")),m=a("1fcf"),v=a("e350"),p=a("299b"),g={name:"LogsTime",components:{dialogQuoteVue:f["a"],dialogQuoteStatusVue:p["a"]},data:function(){return{quotes:[],quote:{bitacora:{user_id:null}},dialogChangeStatus:!1,isNewQuote:!1,search:"",dialog:!1,listLoading:!0,headers:[{value:"id",align:"center",text:"Folio"},{value:"girlfriend_name",text:"Nombre (novia)",sortable:!0},{value:"boyfriend_name",align:"center",text:"Nombre (novio)",sortable:!0},{value:"wedding_date",text:"Fecha boda",sortable:!0},{value:"status",text:"Estatus",sortable:!0},{value:"schedule",text:"Horario",sortable:!0},{value:"dateTransc",align:"center",text:"Dias Transcurridos",sortable:!0},{value:"statusDay",text:"Estatus de respuesta",sortable:!0},{value:"comments",text:"Comentarios",sortable:!0},{value:"created_at",with:"100%",sortable:!0,align:"right",text:"Registrado"},{value:"actions",text:"Acciones",sortable:!1}]}},computed:{},created:function(){this.getQuotes()},methods:{getQuotes:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(m["b"])();case 2:a=t.sent,e.$nextTick((function(){a.forEach((function(t){if(t.dateTransc=null,t.logs&&t.logs.length>0){var a=new Date(t.logs[0].created_at),n=e.moment().diff(a,"days",!0);t.dateTransc=e.moment(t.logs[0].created_at).fromNow();var o=e.getColorStatus(t.status,n);t.color=o.color,t.statusDay=o.text}})),e.quotes=a,e.listLoading=!1}));case 4:case"end":return t.stop()}}),t)})))()},showModalStatus:function(e){this.quote={bitacora:{user_id:null}},this.quote.id=e,this.dialogChangeStatus=!0},getColor:function(e){switch(e){case"Contacto":return"primary";case"Cotización":return"blue";case"Reservado":return"green";case"Cancelado":return"red";default:return"grey"}},checkSpecificPermission:v["b"],editQuote:function(e){this.dialog=!0,this.isNewQuote=!1,this.quote.bitacora={};var t=this;Object.keys(e).forEach((function(a){t.quote[a]=e[a]}))},getColorStatus:function(e,t){switch(e){case"Contacto":case"Reservado":case"Cancelado":return t>=2?{color:"red",text:"En destiempo"}:{color:"blue",text:"A tiempo"};case"Cotización":return t>=3?{color:"red",text:"En destiempo"}:{color:"blue",text:"A tiempo"};default:return{color:"blue",text:"A tiempo"}}},closeDialog:function(){this.dialog=!1,this.dialogChangeStatus=!1},updateQuote:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.$refs.dialogEdit.$refs.form.validate()){a.next=18;break}return t.quote=e,t.dialog2=!1,t.dialogLoading=!0,a.prev=4,a.next=7,Object(m["d"])(t.quote);case 7:t.getQuotes(),t.dialogLoading=!1,t.dialog=!1,t.dialogChangeStatus=!1,a.next=18;break;case 13:a.prev=13,a.t0=a["catch"](4),console.log("try catch"),console.log(a.t0),t.dialogLoading=!1;case 18:case"end":return a.stop()}}),a,null,[[4,13]])})))()}}},b=g,h=(a("f63f"),a("2877")),_=Object(h["a"])(b,c,l,!1,null,null,null),q=_.exports,x={newVisitis:{expectedData:[100,120,161,134,105,160,165],actualData:[120,82,91,154,162,140,145]},messages:{expectedData:[200,192,120,144,160,130,140],actualData:[180,160,151,106,145,150,130]},purchases:{expectedData:[80,100,121,104,105,90,100],actualData:[120,90,100,138,142,130,130]},shoppings:{expectedData:[130,140,141,142,145,150,160],actualData:[120,82,91,154,162,140,130]}},w={name:"DashboardAdmin",components:{LogTimer:q},data:function(){return{lineChartData:x.newVisitis}},methods:{handleSetLineChartData:function(e){this.lineChartData=x[e]}}},C=w,y=(a("8ccd"),Object(h["a"])(C,i,s,!1,null,"41b4479d",null)),k=y.exports,j={name:"Dashboard",components:{adminDashboard:k},data:function(){return{currentRole:"adminDashboard"}},computed:Object(r["a"])({},Object(u["b"])(["roles","userRoutes"])),created:function(){this.currentRole="adminDashboard"}},S=j,D=Object(h["a"])(S,n,o,!1,null,null,null);t["default"]=D.exports},d6dc:function(e,t,a){},e350:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return r}));a("caad"),a("2532"),a("4de4");var n=a("4360");function o(e){if(e&&e instanceof Array&&e.length>0){var t=n["a"].getters&&n["a"].getters.roles,a=e,o=t.some((function(e){return a.includes(e)}));return o}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}function r(e){if(e){var t=n["a"].getters&&n["a"].getters.userRoutes;if(t||(t=JSON.parse(localStorage.getItem("routes"))),!t)return!1;var a=e,o=t.filter((function(e){return e.meta&&e.meta.permissions})),r=o.some((function(e){return e.meta.permissions.includes(a)}));return r}return console.error("need roles! Like v-permission=\"['admin','editor'] custom....\""),!1}},f63f:function(e,t,a){"use strict";a("d6dc")},f6b0:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return i}));var n=a("b775");function o(){return Object(n["a"])({url:"api/customers/getAll",method:"get"})}function r(e){return Object(n["a"])({url:"api/customers/"+e.id,method:"put",data:e})}function u(e){return Object(n["a"])({url:"api/customers/"+e,method:"delete"})}function i(e){return Object(n["a"])({url:"api/customers",method:"post",data:e})}}}]);