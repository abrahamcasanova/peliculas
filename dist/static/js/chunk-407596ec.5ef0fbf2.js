(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-407596ec"],{"4d84":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v("Nuevo Tramite")])]),a("v-card-text",[a("v-container",[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-row",[a("v-col",{attrs:{cols:"12",lg:"3",md:"6"}},[a("v-autocomplete",{attrs:{required:"",items:e.types,chips:"","item-text":"name","item-value":"id","small-chips":"",clearable:"",label:"Tipo de tramite*"},on:{input:e.changeType},model:{value:e.task.type_task,callback:function(t){e.$set(e.task,"type_task",t)},expression:"task.type_task"}})],1)],1),a("v-row",[4==e.task.type_task?a("v-col",{attrs:{cols:"4",lg:"4",md:"4"}},[a("v-text-field",{attrs:{label:"Recibo "},model:{value:e.task.recibe,callback:function(t){e.$set(e.task,"recibe",t)},expression:"task.recibe"}})],1):e._e(),4==e.task.type_task?a("v-col",{attrs:{cols:"4",lg:"4",md:"4"}},[a("v-autocomplete",{attrs:{required:"",items:["SI","NO"],chips:"","small-chips":"",clearable:"",label:"Es subsecuente"},model:{value:e.task.is_subsequent,callback:function(t){e.$set(e.task,"is_subsequent",t)},expression:"task.is_subsequent"}})],1):e._e()],1),a("v-row",[5==e.task.type_task?a("v-col",{attrs:{cols:"6",lg:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Número de siniestro"},model:{value:e.task.sinister_number,callback:function(t){e.$set(e.task,"sinister_number",t)},expression:"task.sinister_number"}})],1):e._e(),2==e.task.type_task||3==e.task.type_task||4==e.task.type_task||5==e.task.type_task?a("v-col",{attrs:{cols:"6",lg:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Número de Póliza"},model:{value:e.task.policy_number,callback:function(t){e.$set(e.task,"policy_number",t)},expression:"task.policy_number"}})],1):e._e(),4==e.task.type_task?a("v-col",{attrs:{cols:"6",lg:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Endoso"},model:{value:e.task.number_endorsement,callback:function(t){e.$set(e.task,"number_endorsement",t)},expression:"task.number_endorsement"}})],1):e._e(),3==e.task.type_task?a("v-col",{attrs:{cols:"6",lg:"6",md:"6"}},[a("v-autocomplete",{attrs:{required:"",items:e.type_endoso,chips:"","small-chips":"",clearable:"",label:"Tipo Endoso"},on:{change:e.changeEndoso},model:{value:e.task.type_endoso,callback:function(t){e.$set(e.task,"type_endoso",t)},expression:"task.type_endoso"}})],1):e._e()],1),a("v-row",[5==e.task.type_task||4==e.task.type_task?a("v-col",{attrs:{cols:"6",lg:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Nombre del contratante",required:""},model:{value:e.task.name_contractor,callback:function(t){e.$set(e.task,"name_contractor",t)},expression:"task.name_contractor"}})],1):e._e(),4!=e.task.type_task?a("v-col",{attrs:{cols:"6",lg:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Nombre del asegurado",rules:e.nameRules,required:""},model:{value:e.task.insured_name,callback:function(t){e.$set(e.task,"insured_name",t)},expression:"task.insured_name"}})],1):e._e(),a("v-col",{attrs:{cols:"6",lg:"6",md:"6"}},[a("v-combobox",{attrs:{"small-chips":"","persistent-hint":"",required:"",rules:e.nameRules,items:e.insurances,"item-text":"name","item-value":"id",label:"Aseguradora"},on:{change:function(t){return e.calcLimitDate(!1)}},model:{value:e.task.insurance_id,callback:function(t){e.$set(e.task,"insurance_id",t)},expression:"task.insurance_id"}})],1),5==e.task.type_task?a("v-col",{attrs:{cols:"6",lg:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Folio del trámite"},model:{value:e.task.folio_procedure,callback:function(t){e.$set(e.task,"folio_procedure",t)},expression:"task.folio_procedure"}})],1):e._e()],1),a("v-row",[5==e.task.type_task?a("v-col",{attrs:{cols:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Reserva/Monto reclamado",prefix:e.currency},on:{input:e.realAmountSinister},scopedSlots:e._u([{key:"label",fn:function(){return[a("div",[e._v(" Reserva/Monto reclamado: "),a("strong",{staticStyle:{color:"teal"}},[e._v(e._s(e.task.reservationFormat))])])]},proxy:!0}],null,!1,1919337816),model:{value:e.task.reservation,callback:function(t){e.$set(e.task,"reservation",t)},expression:"task.reservation"}})],1):e._e(),5==e.task.type_task?a("v-col",{attrs:{cols:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Monto pagado",prefix:e.currency},on:{input:e.realAmountSinister},scopedSlots:e._u([{key:"label",fn:function(){return[a("div",[e._v(" Monto pagado: "),a("strong",{staticStyle:{color:"teal"}},[e._v(e._s(e.task.amountPaidFormat))])])]},proxy:!0}],null,!1,2219956089),model:{value:e.task.amount_paid,callback:function(t){e.$set(e.task,"amount_paid",t)},expression:"task.amount_paid"}})],1):e._e(),4==e.task.type_task?a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-autocomplete",{attrs:{required:"",items:e.methodOfPayments,chips:"","small-chips":"",clearable:"",label:"Forma de pago"},model:{value:e.task.method_of_payment,callback:function(t){e.$set(e.task,"method_of_payment",t)},expression:"task.method_of_payment"}})],1):e._e(),4==e.task.type_task?a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-autocomplete",{attrs:{required:"",items:e.typeOfCurrencies,chips:"","small-chips":"",clearable:"",label:"Moneda"},model:{value:e.task.type_of_currency,callback:function(t){e.$set(e.task,"type_of_currency",t)},expression:"task.type_of_currency"}})],1):e._e(),2==e.task.type_task?a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-text-field",{attrs:{label:"Prima Neta Actual",prefix:e.currency},on:{input:e.realPrice},scopedSlots:e._u([{key:"label",fn:function(){return[a("div",[e._v(" Prima Neta Actual: "),a("strong",{staticStyle:{color:"teal"}},[e._v(e._s(e.task.actualPriceFormat))])])]},proxy:!0}],null,!1,3882427286),model:{value:e.task.actual_price,callback:function(t){e.$set(e.task,"actual_price",t)},expression:"task.actual_price"}})],1):e._e(),2==e.task.type_task?a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-text-field",{attrs:{label:"Prima Neta Renovación",prefix:e.currency},on:{input:e.realPrice},scopedSlots:e._u([{key:"label",fn:function(){return[a("div",[e._v(" Prima Neta Renovación: "),a("strong",{staticStyle:{color:"teal"}},[e._v(e._s(e.task.renovPriceFormat))])])]},proxy:!0}],null,!1,2352745888),model:{value:e.task.renov_price,callback:function(t){e.$set(e.task,"renov_price",t)},expression:"task.renov_price"}})],1):e._e(),2!=e.task.type_task&&5!=e.task.type_task?a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-text-field",{attrs:{id:"price",rules:e.priceRules,type:"number",label:"Prima Neta",prefix:e.currency},on:{input:e.realPrice},scopedSlots:e._u([{key:"label",fn:function(){return[a("div",[e._v(" Prima Neta: "),a("strong",{staticStyle:{color:"teal"}},[e._v(e._s(e.task.priceFormat))])])]},proxy:!0}],null,!1,2019755862),model:{value:e.task.price,callback:function(t){e.$set(e.task,"price",t)},expression:"task.price"}})],1):e._e(),4==e.task.type_task?a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-text-field",{attrs:{id:"priceTotal",rules:e.priceRules,type:"number",label:"Prima Total",prefix:e.currency},on:{input:e.realPrice},scopedSlots:e._u([{key:"label",fn:function(){return[a("div",[e._v(" Prima Total: "),a("strong",{staticStyle:{color:"teal"}},[e._v(e._s(e.task.priceTotalFormat))])])]},proxy:!0}],null,!1,1989029608),model:{value:e.task.priceTotal,callback:function(t){e.$set(e.task,"priceTotal",t)},expression:"task.priceTotal"}})],1):e._e(),a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-text-field",{attrs:{label:"Agente"},model:{value:e.task.agent,callback:function(t){e.$set(e.task,"agent",t)},expression:"task.agent"}})],1),a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-text-field",{attrs:{label:"Subagente"},model:{value:e.task.sub_agent,callback:function(t){e.$set(e.task,"sub_agent",t)},expression:"task.sub_agent"}})],1),a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-autocomplete",{attrs:{required:"",items:e.type_insurance,"item-text":"name","item-value":"id",chips:"","small-chips":"",clearable:"",label:"Ramo"},on:{input:e.changeSubBranch},model:{value:e.task.branch_id,callback:function(t){e.$set(e.task,"branch_id",t)},expression:"task.branch_id"}})],1),a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-autocomplete",{attrs:{required:"",items:e.sub_type_insurance,"item-text":"name","item-value":"id",chips:"","small-chips":"",clearable:"",label:"SubRamo"},model:{value:e.task.sub_branch_id,callback:function(t){e.$set(e.task,"sub_branch_id",t)},expression:"task.sub_branch_id"}})],1),5==e.task.type_task?a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-text-field",{attrs:{label:"Padecimiento/Cobertura afectada"},model:{value:e.task.suffering,callback:function(t){e.$set(e.task,"suffering",t)},expression:"task.suffering"}})],1):e._e(),a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-text-field",{attrs:{label:"Responsable"},model:{value:e.task.responsable,callback:function(t){e.$set(e.task,"responsable",t)},expression:"task.responsable"}})],1)],1),a("v-row",[4==e.task.type_task?a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-menu",{ref:"menu3",attrs:{"close-on-content-click":!1,"return-value":e.task.date_init,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.task,"date_init",t)},"update:return-value":function(t){return e.$set(e.task,"date_init",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Inicio de vigencia","prepend-icon":"mdi-calendar"},model:{value:e.task.date_init,callback:function(t){e.$set(e.task,"date_init",t)},expression:"task.date_init"}},"v-text-field",n,!1),s))]}}],null,!1,4039571378),model:{value:e.menu3,callback:function(t){e.menu3=t},expression:"menu3"}},[a("v-date-picker",{attrs:{locale:"es-mx","no-title":"",scrollable:""},on:{change:function(t){return e.calcLimitDate(!0)}},model:{value:e.task.date_init,callback:function(t){e.$set(e.task,"date_init",t)},expression:"task.date_init"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu3=!1}}},[e._v(" Cancelar ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu3.save(e.task.date_init)}}},[e._v(" OK ")])],1)],1)],1):e._e(),4==e.task.type_task?a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-menu",{ref:"menu5",attrs:{"close-on-content-click":!1,"return-value":e.task.limit_date_paid,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.task,"limit_date_paid",t)},"update:return-value":function(t){return e.$set(e.task,"limit_date_paid",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Fecha limite","prepend-icon":"mdi-calendar",readonly:""},scopedSlots:e._u([{key:"label",fn:function(){return[a("div",[e._v(" Fecha limite: "),e.task.restDays>=0?a("strong",{staticStyle:{color:"teal"}},[e._v(e._s(e.task.restDays)+" dias")]):a("strong",{staticStyle:{color:"red"}},[e._v(e._s(e.task.restDays))])])]},proxy:!0}],null,!0),model:{value:e.task.limit_date_paid,callback:function(t){e.$set(e.task,"limit_date_paid",t)},expression:"task.limit_date_paid"}},"v-text-field",n,!1),s))]}}],null,!1,2378305351),model:{value:e.menu5,callback:function(t){e.menu5=t},expression:"menu5"}},[a("v-date-picker",{attrs:{locale:"es-mx","no-title":"",scrollable:""},model:{value:e.task.limit_date_paid,callback:function(t){e.$set(e.task,"limit_date_paid",t)},expression:"task.limit_date_paid"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu5=!1}}},[e._v(" Cancelar ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu5.save(e.task.limit_date_paid)}}},[e._v(" OK ")])],1)],1)],1):e._e(),4==e.task.type_task?a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-menu",{ref:"menu6",attrs:{"close-on-content-click":!1,"return-value":e.task.last_reminder,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.task,"last_reminder",t)},"update:return-value":function(t){return e.$set(e.task,"last_reminder",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Ultimo recordatorio","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.task.last_reminder,callback:function(t){e.$set(e.task,"last_reminder",t)},expression:"task.last_reminder"}},"v-text-field",n,!1),s))]}}],null,!1,2773501247),model:{value:e.menu6,callback:function(t){e.menu6=t},expression:"menu6"}},[a("v-date-picker",{attrs:{locale:"es-mx","no-title":"",scrollable:""},model:{value:e.task.last_reminder,callback:function(t){e.$set(e.task,"last_reminder",t)},expression:"task.last_reminder"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu6=!1}}},[e._v(" Cancelar ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu6.save(e.task.last_reminder)}}},[e._v(" OK ")])],1)],1)],1):e._e(),4==e.task.type_task?a("v-col",{attrs:{cols:"12",sm:"4",md:"4"}},[a("v-menu",{ref:"menu7",attrs:{"close-on-content-click":!1,"return-value":e.task.day_payment,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.task,"day_payment",t)},"update:return-value":function(t){return e.$set(e.task,"day_payment",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Fecha de pago","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.task.day_payment,callback:function(t){e.$set(e.task,"day_payment",t)},expression:"task.day_payment"}},"v-text-field",n,!1),s))]}}],null,!1,2415034985),model:{value:e.menu7,callback:function(t){e.menu7=t},expression:"menu7"}},[a("v-date-picker",{attrs:{locale:"es-mx","no-title":"",scrollable:""},model:{value:e.task.day_payment,callback:function(t){e.$set(e.task,"day_payment",t)},expression:"task.day_payment"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu7=!1}}},[e._v(" Cancelar ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu7.save(e.task.day_payment)}}},[e._v(" OK ")])],1)],1)],1):e._e()],1),a("v-row",[5==e.task.type_task?a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.task.date_sinister,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.task,"date_sinister",t)},"update:return-value":function(t){return e.$set(e.task,"date_sinister",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Fecha de siniestro","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.task.date_sinister,callback:function(t){e.$set(e.task,"date_sinister",t)},expression:"task.date_sinister"}},"v-text-field",n,!1),s))]}}],null,!1,3409706413),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{attrs:{locale:"es-mx","no-title":"",scrollable:""},model:{value:e.task.date_sinister,callback:function(t){e.$set(e.task,"date_sinister",t)},expression:"task.date_sinister"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancelar ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.task.date_sinister)}}},[e._v(" OK ")])],1)],1)],1):e._e(),5==e.task.type_task?a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-menu",{ref:"menu2",attrs:{"close-on-content-click":!1,"return-value":e.task.date_paid,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.task,"date_paid",t)},"update:return-value":function(t){return e.$set(e.task,"date_paid",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Fecha de pago","prepend-icon":"mdi-calendar",readonly:""},model:{value:e.task.date_paid,callback:function(t){e.$set(e.task,"date_paid",t)},expression:"task.date_paid"}},"v-text-field",n,!1),s))]}}],null,!1,973496135),model:{value:e.menu2,callback:function(t){e.menu2=t},expression:"menu2"}},[a("v-date-picker",{attrs:{locale:"es-mx","no-title":"",scrollable:""},model:{value:e.task.date_paid,callback:function(t){e.$set(e.task,"date_paid",t)},expression:"task.date_paid"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu2=!1}}},[e._v(" Cancelar ")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu2.save(e.task.date_paid)}}},[e._v(" OK ")])],1)],1)],1):e._e(),a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-autocomplete",{attrs:{required:"",items:e.status,"item-text":"name","item-value":"id",chips:"","small-chips":"",clearable:"",label:"Estatus*"},model:{value:e.task.status,callback:function(t){e.$set(e.task,"status",t)},expression:"task.status"}})],1),4==e.task.type_task?a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-autocomplete",{attrs:{required:"",items:["SI","NO"],chips:"","small-chips":"",clearable:"",label:"¿Aplicado?"},model:{value:e.task.payment_applied,callback:function(t){e.$set(e.task,"payment_applied",t)},expression:"task.payment_applied"}})],1):e._e(),4==e.task.type_task?a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-autocomplete",{attrs:{required:"",items:["SI","NO"],chips:"","small-chips":"",clearablef:"",label:"¿Factura enviada?"},model:{value:e.task.sent_invoice,callback:function(t){e.$set(e.task,"sent_invoice",t)},expression:"task.sent_invoice"}})],1):e._e(),4==e.task.type_task?a("v-col",{attrs:{cols:"4",md:"4"}},[a("v-autocomplete",{attrs:{required:"",items:["SI","NO"],chips:"","small-chips":"",clearable:"",label:"¿Cancelada?"},model:{value:e.task.cancelled,callback:function(t){e.$set(e.task,"cancelled",t)},expression:"task.cancelled"}})],1):e._e()],1),a("v-row",[a("v-col",{attrs:{cols:"12",md:"12"}},[a("v-textarea",{attrs:{filled:"","auto-grow":"",label:"Comentarios u observaciones",rows:"3","row-height":"30",shaped:""},model:{value:e.task.comments,callback:function(t){e.$set(e.task,"comments",t)},expression:"task.comments"}})],1)],1)],1)],1),a("small",{staticClass:"red--text"},[e._v("*Campos obligatorios")])],1),a("v-card-actions",[a("v-spacer"),0==e.isUpdate?a("v-btn",{attrs:{outlined:"",rounded:"",color:"primary",text:""},on:{click:function(t){return e.saveTask()}}},[e._v(" Guardar ")]):a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){return e.updateUser()}}},[e._v(" Actualizar ")])],1),a("v-snackbar",{attrs:{timeout:-1,color:"blue-grey",rounded:"pill"},scopedSlots:e._u([{key:"action",fn:function(t){var s=t.attrs;return[a("v-btn",e._b({attrs:{color:"blue",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",s,!1),[e._v(" Cerrar ")])]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.message)+" ")])],1),a("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialogLoading,callback:function(t){e.dialogLoading=t},expression:"dialogLoading"}},[a("v-card",{attrs:{color:"primary",dark:""}},[a("v-card-text",[e._v(" Guardando.... espera un momento "),a("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}})],1)],1)],1)],1)},n=[],r=a("1da1"),i=(a("a9e3"),a("5319"),a("ac1f"),a("b680"),a("7db0"),a("96cf"),a("b775"));function o(){return Object(i["a"])({url:"api/branch/getAll",method:"get"})}var l=a("b199");function c(){return Object(i["a"])({url:"api/insurances/getAll",method:"get"})}var u=a("5f87"),d={name:"NewTasks",data:function(){return{task:{last_reminder:this.moment().format("YYYY-MM-DD"),cancelled:"NO"},currency:"$",nameRules:[function(e){return!!e||"Nombre es requerido"}],message:'Para calcular la fecha limite es necesario seleccionar "Aseguradora", "Ramo" y  "Es subsecuente"',snackbar:!1,priceRules:[],isUpdate:!1,valid:!1,numberRule:function(e){return null==e||""===e||(!isNaN(parseFloat(e))||"El campo solo puede llevar numeros")},menu:!1,menu2:!1,menu3:!1,menu4:!1,menu5:!1,menu6:!1,menu7:!1,dialogLoading:!1,type_insurance:[],methodOfPayments:["CONTADO","MENSUAL","TRIMESTRAL","SEMESTRAL"],typeOfCurrencies:["PESOS","US DOLARES"],sub_type_insurance:[],insurances:[{id:1,name:"AFIRME",periodicity:{danios:{payDays:28,subsequentPayDays:28},autos:{payDays:28,subsequentPayDays:28}}},{id:2,name:"GNP",periodicity:{danios:{payDays:28,subsequentPayDays:28},personas:{payDays:28,subsequentPayDays:28},autos:{payDays:13,subsequentPayDays:13}}},{id:3,name:"ATLAS",periodicity:{danios:{payDays:28,subsequentPayDays:0}}},{id:4,name:"CHUBB-ACE-ABA",periodicity:{danios:{payDays:28,subsequentPayDays:28},autos:{payDays:28,subsequentPayDays:28}}},{id:5,name:"AXA",periodicity:{danios:{payDays:28,subsequentPayDays:28},personas:{payDays:28,subsequentPayDays:28},autos:{payDays:28,subsequentPayDays:28}}},{id:6,name:"BANORTE",periodicity:{danios:{payDays:28,subsequentPayDays:28},personas:{payDays:28,subsequentPayDays:28},autos:{payDays:28,subsequentPayDays:28}}},{id:7,name:"HDI",periodicity:{danios:{payDays:28,subsequentPayDays:13},personas:{payDays:28,subsequentPayDays:28},autos:{payDays:28,subsequentPayDays:28}}},{id:8,name:"GMX",periodicity:{danios:{payDays:28,subsequentPayDays:0}}},{id:9,name:"ZURICH GI",periodicity:{danios:{payDays:28,subsequentPayDays:28},autos:{payDays:28,subsequentPayDays:28}}},{id:10,name:"MAPFRE",periodicity:{danios:{payDays:28,subsequentPayDays:28},personas:{payDays:28,subsequentPayDays:28},autos:{payDays:28,subsequentPayDays:28}}},{id:11,name:"SURA",periodicity:{danios:{payDays:28,subsequentPayDays:3},autos:{payDays:28,subsequentPayDays:3}}},{id:12,name:"INBURSA",periodicity:{danios:{payDays:28,subsequentPayDays:3},personas:{payDays:28,subsequentPayDays:3}}},{id:13,name:"ALLIANZ",periodicity:{danios:{payDays:28,subsequentPayDays:28},personas:{payDays:28,subsequentPayDays:28}}},{id:14,name:"QUALITAS",periodicity:{autos:{payDays:13,subsequentPayDays:0}}},{id:13,name:"METLIFE",periodicity:{personas:{payDays:28,subsequentPayDays:28}}},{id:13,name:"PLAN SEGURO",periodicity:{personas:{payDays:28,subsequentPayDays:28}}},{id:13,name:"SISNOVA",periodicity:{personas:{payDays:28,subsequentPayDays:0}}}],types:[{id:1,name:"Cotización"}],type_endoso:["A","B","D"],status:["Armado de Slip","En proceso de emisión","En proceso","En cotización","En revisión","En pendiente de información","Entregado (cliente)","En recotización","Rechazada","Emitida"],gracePeriodicity:{autos:4,personas:6,danios:2}}},created:function(){this.getBranch(),this.getInsurances()},methods:{getBranch:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o();case 2:a=t.sent,e.type_insurance=a;case 4:case"end":return t.stop()}}),t)})))()},getInsurances:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:e.insurances=t.sent;case 3:case"end":return t.stop()}}),t)})))()},calcLimitDate:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(Object.prototype.hasOwnProperty.call(this.task,"branch_id")&&Object.prototype.hasOwnProperty.call(this.task,"insurance_id")&&null!=this.task.insurance_id&&this.task.is_subsequent){var t=JSON.parse(this.task.insurance_id.periodicity_json),a=0,s=0;switch(this.task.branch_id){case 1:a="SI"===this.task.is_subsequent?t.autos.subsequentPayDays:t.autos.payDays,s=this.gracePeriodicity.autos;break;case 2:a="SI"===this.task.is_subsequent?t.personas.subsequentPayDays:t.personas.payDays,s=this.gracePeriodicity.personas;break;case 3:a="SI"===this.task.is_subsequent?t.danios.subsequentPayDays:t.danios.payDays,s=this.gracePeriodicity.danios;break}if(this.task.limit_date_paid=this.task.date_init?this.moment(this.task.date_init).add(a,"days").format("YYYY-MM-DD"):null,0===a){var n=this.moment(this.task.date_init).add(-s,"days").weekday();if(this.task.limit_date_paid=this.moment(this.task.date_init).add(-s,"days").format("YYYY-MM-DD"),0===n||6===n)switch(n){case 0:this.task.limit_date_paid=this.moment(this.task.date_init).add(-2-s,"days").format("YYYY-MM-DD");break;default:this.task.limit_date_paid=this.moment(this.task.date_init).add(-1-s,"days").format("YYYY-MM-DD");break}}this.task.restDays=this.moment(this.task.limit_date_paid).diff(this.moment(),"days")+1}else this.snackbar=e},realPrice:function(){var e=this;this.$nextTick((function(){e.task.priceFormat=e.formatAsCurrency(e.task.price,2),e.task.actualPriceFormat=e.formatAsCurrency(e.task.actual_price,2),e.task.renovPriceFormat=e.formatAsCurrency(e.task.renov_price,2),e.task.priceTotalFormat=e.formatAsCurrency(e.task.priceTotal,2),e.$forceUpdate()}))},realAmountSinister:function(){var e=this;this.$nextTick((function(){e.task.amountPaidFormat=e.formatAsCurrency(e.task.amount_paid,2),e.task.reservationFormat=e.formatAsCurrency(e.task.reservation,2),e.$forceUpdate()}))},formatAsCurrency:function(e,t){return t=t||0,e?(e=Number(e),"$ "+e.toFixed(t).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")):0},changeSubBranch:function(){var e=this;this.task.sub_branch_id=null;var t=this.type_insurance.find((function(t){return t.id===e.task.branch_id}));this.sub_type_insurance=t.sub_branches},changeEndoso:function(){var e=this;this.$nextTick((function(){switch(e.task.type_endoso){case"A":e.priceRules=[function(e){return e&&e>=1||"La prima debe de ser Mayor que 1"}],delete e.task.price,delete e.task.priceFormat;break;case"B":e.priceRules=[];break;case"D":e.priceRules=[function(e){return e&&e<=0||"La prima debe de ser Menor que 1"}],delete e.task.price,delete e.task.priceFormat;break;default:e.priceRules=[];break}}))},changeType:function(){var e=this;this.$nextTick((function(){delete e.task.price,delete e.task.priceTotal,delete e.task.actual_price,delete e.task.renov_price,delete e.task.priceFormat,delete e.task.actualPriceFormat,delete e.task.renovPriceFormat,delete e.task.amountPaidFormat,delete e.task.reservationFormat,delete e.task.amount_paid,delete e.task.reservation,delete e.task.date_sinister,delete e.task.date_paid,e.task.sinister_number=null,e.task.folio_procedure=null,e.task.policy_number=null,e.task.name_contractor=null,e.$forceUpdate()}))},saveTask:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$refs.form.validate()){t.next=15;break}return e.dialogLoading=!0,e.task.user_id=Object(u["a"])(),t.prev=3,t.next=6,Object(l["b"])(e.task);case 6:e.dialogLoading=!1,e.task={},t.next=15;break;case 10:t.prev=10,t.t0=t["catch"](3),console.log("try catch"),console.log(t.t0),e.dialogLoading=!1;case 15:case"end":return t.stop()}}),t,null,[[3,10]])})))()}}},p=d,m=a("2877"),k=Object(m["a"])(p,s,n,!1,null,null,null);t["default"]=k.exports},b199:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i}));var s=a("b775");function n(e){return Object(s["a"])({url:"api/task",method:"post",data:e})}function r(e,t){return Object(s["a"])({url:"api/task/"+t,method:"put",data:e})}function i(){return Object(s["a"])({url:"api/task/getAll",method:"get"})}}}]);