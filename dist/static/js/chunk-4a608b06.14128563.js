(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a608b06"],{"4bd3":function(t,e,a){"use strict";a("b389")},"5b96":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("v-card",[a("v-card-title",[t._v(" Tareas/Actividades "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.list,search:t.search,"items-per-page":5,loading:t.listLoading,"footer-props":{itemsPerPageText:"Filas por página",itemsPerPageAll:"Todos",itemsPerPageOptions:[5,10]},"loading-text":"Cargando....... Espere un momento"},scopedSlots:t._u([{key:"item.url",fn:function(e){var n=e.item;return[a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{"justify-center":"","align-center":""}},[a("v-flex",{attrs:{shrink:""}},[a("div",[a("FsLightbox",{attrs:{toggler:t.toggler,sources:[n.url]}}),a("v-img",{staticStyle:{cursor:"pointer"},attrs:{contain:"","lazy-src":n.url,"max-height":"100","max-width":"120",src:n.url}})],1)])],1)],1)]}},{key:"item.actions",fn:function(e){var n=e.item;return[a("v-row",{attrs:{align:"center",justify:"space-around"}},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({staticClass:"mx-2",attrs:{fab:"",dark:"","x-small":"",color:"green"},on:{click:function(e){return t.editNotice(n)}}},"v-btn",s,!1),i),[a("v-icon",{attrs:{dark:""}},[t._v(" mdi-pencil ")])],1)]}}],null,!0)},[a("span",[t._v("Editar "+t._s(t.title))])]),a("el-popconfirm",{attrs:{title:"Eliminar "+t.title+"?","confirm-button-text":"Eliminar","cancel-button-text":"Cancelar","confirm-button-type":"danger force-white-color"},on:{onConfirm:function(e){return t.deleteNotice(n)}}},[a("v-btn",{staticClass:"mx-2",attrs:{slot:"reference",fab:"",dark:"","x-small":"",color:"red"},slot:"reference"},[a("v-icon",{attrs:{dark:""}},[t._v(" mdi-delete-variant ")])],1)],1)],1)]}}],null,!0)})],1),a("drag-drop",{key:JSON.stringify(t.stories),attrs:{data:t.stories,dropzones:t.dropGroups,"dropzones-title":"Tareas asignadas","original-data":t.stories,"original-title":"Tareas por realizar","in-place":!0,"enable-save":!1,"enable-cancel":!1},on:{dropInDestinationBucket:t.destinationBucketDropEvent},scopedSlots:t._u([{key:"dd-card",fn:function(t){var e=t.cardData;return[a("MyComponent",{attrs:{data:e}})]}}])})],1)},i=[],s=a("1da1"),r=(a("96cf"),a("159b"),a("c740"),a("b0c0"),a("81fe")),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("v-card",{staticClass:"ma-2"},[a("v-list-item",{attrs:{"two-line":""}},[a("v-list-item-content",{staticClass:"pb-1"},[a("v-list-item-title",{staticClass:"headline"},[t.data.date_init||t.data.final_date?a("div",{staticClass:"subheading subtitle-2 font-weight-thin font-italic grey--text pl-4 pr-4 float-right"},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("span",t._g(t._b({},"span",i,!1),n),[t._v(" "+t._s(t.data.date_init)+" / "+t._s(t.data.final_date)+" ")])]}}],null,!1,716925446)},[a("span",[t._v("Inicio Vig/ Fin Vig")])])],1):t._e()]),a("v-list-item-title",{staticClass:"headline"},[a("div",{staticClass:"subheading subtitle-2 font-weight-thin font-italic grey--text pl-4 pr-4 float-right"},[t._v(" Fecha limite de pago: "),a("span",{staticClass:"font-weight-bold"},[t._v(" "+t._s(t.data.limit_date_paid)+" ")])])]),a("v-list-item-title",{staticClass:"headline d-inline-flex pt-2"},[a("v-layout",{attrs:{"align-center":""}},[a("v-flex",{attrs:{"fill-height":""}},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("span",t._g(t._b({},"span",i,!1),n),[a("v-badge",{attrs:{color:t.data.traffic_light,overlap:""}},[a("v-icon",{attrs:{medium:""}},[t._v(" mdi-traffic-light ")])],1)],1)]}}])},[a("span",[t._v("Dias restantes "+t._s(t.data.restDays))])])],1)],1),a("v-layout",{attrs:{"align-center":""}},[a("v-flex",{attrs:{"fill-height":""}},[t._v(t._s(t.data.name_type_task))])],1),t.data.price?a("div",{staticClass:"subheading title font-weight-bold primary--text pl-4 pr-4 float-right"},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("span",t._g(t._b({},"span",i,!1),n),[t._v(t._s(t._f("currency")(t.data.price)))])]}}],null,!1,904796031)},[a("span",[t._v("Prima Neta")])])],1):t._e(),a("div",{staticClass:"flex-column"},[t.data.actual_price||t.data.actual_price?a("v-timeline",{attrs:{dense:""}},[a("v-timeline-item",{attrs:{small:"","fill-dot":""}},[t.data.actual_price?a("div",{staticClass:" title font-weight-bold primary--text"},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("span",t._g(t._b({},"span",i,!1),n),[t._v(t._s(t._f("currency")(t.data.actual_price)))])]}}],null,!1,665667438)},[a("span",[t._v("Prima Neta Actual")])])],1):t._e()]),a("v-timeline-item",{staticClass:"text-right",attrs:{small:"","fill-dot":""}},[t.data.renov_price?a("div",{staticClass:" title font-weight-bold primary--text"},[a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,i=e.attrs;return[a("span",t._g(t._b({},"span",i,!1),n),[t._v(t._s(t._f("currency")(t.data.renov_price)))])]}}],null,!1,1051339552)},[a("span",[t._v("Prima Neta Renov")])])],1):t._e()])],1):t._e()],1)],1),t.data.policy_number?a("v-list-item-title",{staticClass:"subtitle-1"},[t._v(" Póliza: "+t._s(t.data.policy_number)+" ")]):t._e(),t.data.number_endorsement?a("v-list-item-title",{staticClass:"subtitle-1"},[t._v(" Endoso: "+t._s(t.data.number_endorsement)+" ")]):t._e(),a("v-list-item-subtitle",{staticClass:"d-inline-flex"},[t.data.branches?a("p",{staticClass:"mr-1 mb-0 font-weight-medium text-truncate"},[t._v(" "+t._s(t.data.branches.name)+" | "+t._s(t.data.sub_branches.name)+" ")]):t._e(),a("p",{staticClass:"mr-1 mb-0 font-weight-medium blue--text"},[t._v(" "+t._s(t.data.insurance.name)+" ")])]),a("v-list-item-subtitle",[t._v("Creado: "+t._s(t.data.created_at)+" ")]),t.data.last_reminder?a("v-list-item-subtitle",[t._v("Ultimo recordatorio: "),a("span",{staticClass:"mr-1 mb-0 font-weight-medium blue--text"},[t._v(" "+t._s(t.data.last_reminder)+" ")])]):t._e(),t.data.day_payment?a("v-list-item-subtitle",[t._v("Fecha de pago: "),a("span",{staticClass:"mr-1 mb-0 font-weight-medium blue--text"},[t._v(" "+t._s(t.data.day_payment)+" ")])]):t._e(),t.data.responsable?a("v-list-item-subtitle",[t._v("Responsable: "+t._s(t.data.responsable)+" ")]):t._e()],1)],1),a("v-list-item",{staticStyle:{"min-height":"unset !important"},attrs:{"three-line":""}},[a("v-list-item-subtitle",{staticClass:"d-inline-flex"},[t.data.recibe?a("div",{staticClass:"float-right"},[t._v(" Recibo: "),a("strong",[t._v(t._s(t.data.recibe))])]):t._e(),t.data.is_subsequent?a("div",{staticClass:"pl-4 pr-4 float-right"},[t._v(" Subsecuente: "),a("strong",[t._v(t._s(t.data.is_subsequent))])]):t._e(),t.data.is_paid?a("div",{staticClass:"float-right"},[t._v(" Pagado: "),"SI"==t.data.is_paid?a("strong",{staticClass:"blue--text"},[t._v(t._s(t.data.is_paid))]):a("strong",{staticClass:"red--text"},[t._v(t._s(t.data.is_paid))])]):t._e()])],1),a("v-list-item",{staticStyle:{"min-height":"unset !important"},attrs:{"three-line":""}},[a("v-list-item-subtitle",{staticClass:"d-inline-flex"},[t.data.payment_applied?a("div",{staticClass:"float-right"},[t._v(" Aplicado: "),"SI"==t.data.payment_applied?a("strong",{staticClass:"blue--text"},[t._v(t._s(t.data.payment_applied))]):a("strong",{staticClass:"red--text"},[t._v(t._s(t.data.payment_applied))])]):t._e(),t.data.sent_invoice?a("div",{staticClass:"pl-4 pr-4 float-right"},[t._v(" Factura enviada: "),a("strong",[t._v(t._s(t.data.sent_invoice))])]):t._e(),t.data.method_of_payment?a("div",{staticClass:"float-right"},[t._v(" Forma de pago: "),a("strong",[t._v(t._s(t.data.method_of_payment)+" "+t._s(t.data.type_of_currency))])]):t._e()])],1),a("v-card-actions",{staticClass:"flex-column"},[a("v-list-item",{staticClass:"pl-1 pr-1 grow",staticStyle:{width:"100%"}},[a("v-list-item-avatar",{attrs:{color:"white darken-3"}},[a("v-avatar",{attrs:{color:"grey"}},[a("v-icon",[t._v(" mdi-account-tie ")])],1)],1),a("v-list-item-content",{staticClass:"pb-1 pt-1"},[t.data.agent?a("p",{staticClass:"ma-0 font-weight-regular"},[t._v(" Agente: "),a("span",{staticClass:"font-italic font-weight-light"},[t._v(t._s(t.data.agent)+" ")])]):t._e(),t.data.sub_agent?a("p",{staticClass:"ma-0 font-weight-regular"},[t._v(" Subagente: "),a("span",{staticClass:"font-italic font-weight-light"},[t._v(t._s(t.data.sub_agent)+" ")])]):t._e()])],1),a("v-list-item",{staticClass:"pl-1 pr-1 grow",staticStyle:{width:"100%"}},[a("v-list-item-avatar",{attrs:{color:"white darken-3"}},[a("v-avatar",{attrs:{color:"cyan"}},[a("v-icon",{attrs:{dark:""}},[t._v(" mdi-account-circle ")])],1)],1),a("v-list-item-content",{staticClass:"pb-1 pt-1"},[t.data.name_contractor?a("p",{staticClass:"ma-0 font-weight-regular"},[t._v(" Contratante: "),a("span",{staticClass:"font-italic font-weight-light"},[t._v(t._s(t.data.name_contractor)+" ")])]):t._e(),t.data.insured_name?a("p",{staticClass:"ma-0 font-weight-regular"},[t._v(" Asegurado: "),a("span",{staticClass:"font-italic font-weight-light"},[t._v(t._s(t.data.insured_name)+" ")])]):t._e(),t.data.user.name?a("p",{staticClass:"ma-0 font-weight-regular"},[t._v(" Usuario: "),a("span",{staticClass:"font-italic font-weight-light"},[t._v(t._s(t.data.user.name)+" ")])]):t._e()])],1),t.data.comments?a("v-expansion-panels",[a("v-expansion-panel",{attrs:{shaped:""}},[a("v-expansion-panel-header",{scopedSlots:t._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:"primary"}},[t._v(" $expand ")])]},proxy:!0}],null,!1,431335688)},[t._v(" Comentario ")]),a("v-expansion-panel-content",[a("p",{staticClass:"subtitle-2 font-italic"},[t._v(" "+t._s(t.data.comments)+" ")])])],1)],1):t._e()],1)],1)],1)},o=[],c={name:"MyComponent",props:["data"],methods:{markDone:function(){this.$emit("done",this.data)}}},d=c,u=(a("7609"),a("2877")),_=Object(u["a"])(d,l,o,!1,null,null,null),p=_.exports,v=a("b199"),m={name:"Tasks",components:{DragDrop:r["a"],MyComponent:p},data:function(){return{stories:[],dropGroups:[{name:"Armado de Slip",children:[]},{name:"En proceso",children:[]},{name:"En proceso de emisión",children:[]},{name:"En cotización",children:[]},{name:"En revisión",children:[]},{name:"En pendiente de información",children:[]},{name:"Entregado (cliente)",children:[]},{name:"En recotización",children:[]},{name:"Rechazada",children:[]},{name:"Emitida",children:[]}],headers:[{value:"id",align:"center",text:"Folio"},{value:"userFullName",text:"Nombre Usuario",sortable:!0},{value:"typeTask",align:"center",text:"Tipo",sortable:!1},{value:"insured_name",align:"center",text:"Asegurado",sortable:!1},{value:"insurance_id",align:"center",text:"Aseguradora",sortable:!1},{value:"policy_number",align:"center",text:"Poliza",sortable:!1},{value:"name_contractor",align:"center",text:"Contratante",sortable:!1},{value:"price",align:"center",text:"Prima neta",sortable:!1},{value:"actual_price",align:"center",text:"Prima neta actual",sortable:!1},{value:"renov_price",align:"center",text:"Prima neta rev",sortable:!1},{value:"reservation",align:"center",text:"Reserva",sortable:!1},{value:"amount_paid",align:"center",text:"Monto pagado",sortable:!1},{value:"agent",align:"center",text:"Agente",sortable:!1},{value:"sub_agent",align:"center",text:"Subagente",sortable:!1},{value:"branch_id",align:"center",text:"Ramo",sortable:!1},{value:"sub_branch_id",align:"center",text:"Subramo",sortable:!1},{value:"type_endoso",align:"center",text:"Tipo endoso",sortable:!1},{value:"recibe",align:"center",text:"Recibo",sortable:!1},{value:"is_subsequent",align:"center",text:"Subsecuente",sortable:!1},{value:"is_paid",align:"center",text:"Pagado",sortable:!1},{value:"number_endorsement",align:"center",text:"No. endoso",sortable:!1},{value:"method_of_payment",align:"center",text:"Forma de pago",sortable:!1},{value:"type_of_currency",align:"center",text:"Moneda",sortable:!1},{value:"suffering",align:"center",text:"Padecimiento",sortable:!1},{value:"number_endorsement",align:"center",text:"No. endoso",sortable:!1},{value:"number_endorsement",align:"center",text:"No. endoso",sortable:!1},{value:"number_endorsement",align:"center",text:"No. endoso",sortable:!1},{value:"number_endorsement",align:"center",text:"No. endoso",sortable:!1},{value:"number_endorsement",align:"center",text:"No. endoso",sortable:!1},{value:"number_endorsement",align:"center",text:"No. endoso",sortable:!1},{value:"number_endorsement",align:"center",text:"No. endoso",sortable:!1},{value:"number_endorsement",align:"center",text:"No. endoso",sortable:!1},{value:"number_endorsement",align:"center",text:"No. endoso",sortable:!1},{value:"created_at",with:"100%",sortable:!0,align:"center",text:"Registrado"},{value:"actions",text:"Acciones",sortable:!1}]}},created:function(){this.getTaks()},methods:{getTaks:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(v["a"])();case 2:a=e.sent,a.forEach((function(e){var a=t.dropGroups.findIndex((function(t){return t.name===e.status}));if(e.traffic_light="grey",Object.prototype.hasOwnProperty.call(e,"limit_date_paid")&&null!=e.limit_date_paid){var n=t.moment(e.limit_date_paid).diff(t.moment(),"days");e.traffic_light="red",n>28?e.traffic_light="green":n<=28&&n>=15&&(e.traffic_light="yellow"),e.restDays=n}t.dropGroups[a].children.push(e)})),t.dropGroups.forEach((function(t){}));case 5:case"end":return e.stop()}}),e)})))()},destinationBucketDropEvent:function(t,e){null!==e.addedIndex&&e.payload&&t!==e.payload.status&&(e.payload.status=t,Object(v["c"])(e.payload,e.payload.id))},updateTask:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(v["c"])(t,e);case 3:a.next=9;break;case 5:a.prev=5,a.t0=a["catch"](0),console.log("try catch"),console.log(a.t0);case 9:case"end":return a.stop()}}),a,null,[[0,5]])})))()}}},g=m,b=(a("4bd3"),Object(u["a"])(g,n,i,!1,null,null,null));e["default"]=b.exports},7609:function(t,e,a){"use strict";a("867e")},"867e":function(t,e,a){},b199:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return r}));var n=a("b775");function i(t){return Object(n["a"])({url:"api/task",method:"post",data:t})}function s(t,e){return Object(n["a"])({url:"api/task/"+e,method:"put",data:t})}function r(){return Object(n["a"])({url:"api/task/getAll",method:"get"})}},b389:function(t,e,a){}}]);